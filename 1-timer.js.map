{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.getElementById('datetime-picker');\nconst button = document.querySelector('button');\nconst days = document.querySelector('[data-days]');\nconst hours = document.querySelector('[data-hours]');\nconst minutes = document.querySelector('[data-minutes]');\nconst seconds = document.querySelector('[data-seconds]');\n\nlet userSelectedDate;\n\nflatpickr(input, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0].getTime();\n    if (userSelectedDate < Date.now()) {\n      button.disabled = true;\n      iziToast.error({\n        position: 'topCenter',\n        message: 'Please choose a date in the future',\n      });\n    } else {\n      button.disabled = false;\n      button.classList.add('active');\n    }\n  },\n});\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  value = String(value);\n  if (value.length < 2) {\n    return value.padStart(2, '0');\n  } else {\n    return value;\n  }\n}\n\nbutton.addEventListener('click', onHandleClick);\n\nfunction onHandleClick() {\n  button.classList.remove('active');\n  if (userSelectedDate < Date.now()) {\n    iziToast.error({\n      position: 'topCenter',\n      message: 'Please choose a date in the future',\n    });\n    button.disabled = true;\n  }\n\n  const intervalId = setInterval(countDownFunc, 1000);\n  countDownFunc();\n\n  function countDownFunc() {\n    let timeLeft = userSelectedDate - Date.now();\n    let newTimeLeft = (timeLeft -= 1000);\n    let { days, hours, minutes, seconds } = convertMs(newTimeLeft);\n    setTimerDisplay(days, hours, minutes, seconds);\n    button.disabled = true;\n    input.disabled = true;\n\n    if (timeLeft <= 0) {\n      clearInterval(intervalId);\n      setTimerDisplay(0, 0, 0, 0);\n      button.disabled = false;\n      input.disabled = false;\n      return;\n    }\n  }\n\n  function setTimerDisplay(d, h, m, s) {\n    days.textContent = addLeadingZero(d);\n    hours.textContent = addLeadingZero(h);\n    minutes.textContent = addLeadingZero(m);\n    seconds.textContent = addLeadingZero(s);\n  }\n}\n"],"names":["input","button","days","hours","minutes","seconds","userSelectedDate","flatpickr","selectedDates","iziToast","convertMs","ms","addLeadingZero","value","onHandleClick","intervalId","countDownFunc","timeLeft","newTimeLeft","setTimerDisplay","d","h","m"],"mappings":"+IAOA,MAAMA,EAAQ,SAAS,eAAe,iBAAiB,EACjDC,EAAS,SAAS,cAAc,QAAQ,EACxCC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvD,IAAIC,EAEJC,EAAUP,EAAO,CACf,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQQ,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAAE,QAAO,EACvCF,EAAmB,KAAK,OAC1BL,EAAO,SAAW,GAClBQ,EAAS,MAAM,CACb,SAAU,YACV,QAAS,oCACjB,CAAO,IAEDR,EAAO,SAAW,GAClBA,EAAO,UAAU,IAAI,QAAQ,EAEhC,CACH,CAAC,EAED,SAASS,EAAUC,EAAI,CAMrB,MAAMT,EAAO,KAAK,MAAMS,EAAK,KAAG,EAC1BR,EAAQ,KAAK,MAAOQ,EAAK,MAAO,IAAI,EACpCP,EAAU,KAAK,MAAQO,EAAK,MAAO,KAAQ,GAAM,EACjDN,EAAU,KAAK,MAASM,EAAK,MAAO,KAAQ,IAAU,GAAM,EAClE,MAAO,CAAE,KAAAT,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASO,EAAeC,EAAO,CAE7B,OADAA,EAAQ,OAAOA,CAAK,EAChBA,EAAM,OAAS,EACVA,EAAM,SAAS,EAAG,GAAG,EAErBA,CAEX,CAEAZ,EAAO,iBAAiB,QAASa,CAAa,EAE9C,SAASA,GAAgB,CACvBb,EAAO,UAAU,OAAO,QAAQ,EAC5BK,EAAmB,KAAK,QAC1BG,EAAS,MAAM,CACb,SAAU,YACV,QAAS,oCACf,CAAK,EACDR,EAAO,SAAW,IAGpB,MAAMc,EAAa,YAAYC,EAAe,GAAI,EAClDA,IAEA,SAASA,GAAgB,CACvB,IAAIC,EAAWX,EAAmB,KAAK,IAAG,EACtCY,EAAeD,GAAY,IAC3B,CAAE,KAAAf,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYK,EAAUQ,CAAW,EAK7D,GAJAC,EAAgBjB,EAAMC,EAAOC,EAASC,CAAO,EAC7CJ,EAAO,SAAW,GAClBD,EAAM,SAAW,GAEbiB,GAAY,EAAG,CACjB,cAAcF,CAAU,EACxBI,EAAgB,EAAG,EAAG,EAAG,CAAC,EAC1BlB,EAAO,SAAW,GAClBD,EAAM,SAAW,GACjB,MACD,CACF,CAED,SAASmB,EAAgBC,EAAGC,EAAGC,EAAG,EAAG,CACnCpB,EAAK,YAAcU,EAAeQ,CAAC,EACnCjB,EAAM,YAAcS,EAAeS,CAAC,EACpCjB,EAAQ,YAAcQ,EAAeU,CAAC,EACtCjB,EAAQ,YAAcO,EAAe,CAAC,CACvC,CACH"}